{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "width": 700,
  "height": 350,
  "title": "Energy Consumption vs GDP per Capita",
  "data": {
    "url": "https://raw.githubusercontent.com/ishtiaquehossain/FIT3179_Assignment02/main/bubble.csv"
  },

   "params": [
    {
      "name": "Year_Above",
      "value": 1990,
      "bind": {
        "input": "range",
        "min": 1990,
        "max": 2010,
        "step": 1,
        "name": "Minimum year"
      }
    }],

     "selection": {
 "continent_highlight": {
 "type": "multi",
 "fields": ["Entity"],
 "bind": "legend"
 }
 },

  "transform": [{"filter": "year(datum.Year) == Year_Above && (datum.Entity=='Australia' || datum.Entity=='United States' || datum.Entity=='Saudi Arabia' || datum.Entity=='France' || datum.Entity == 'China' || datum.Entity == 'South Korea')"}],
  "mark": "circle",
  "encoding": {
    "x": {"field": "GDP", "type": "quantitative", "title": "GDP per Capita","scale":{"domain":[0,60000]},"axis":{"tickCount":4,"domainColor":"ghostwhite","gridDashOffset":0.01}
    },
    "y": {
      "field": "Energy Consumed",
      "type": "quantitative",
      "title": "Energy Consumed (TWh)",
      "scale":{"domain":[0,9000]},
      "axis":{"grid": false,"domainColor":"ghostwhite","gridDashOffset":0.01}
    },
    "color": {"field": "Entity", "type": "nominal", "scale":{"domain":["Australia","United States","Saudi Arabia","South Korea","China","France"],"range":["#336666", "#9ae5de", "#91b8bd", "#000080", "#8abbd0", "#efe8d1"]}
  },
    "opacity": {
 "condition": {"selection": "continent_highlight", "value": 0.6},
 "value": 0.2
 },
    "size": {
 "field": "Population",
 "type": "quantitative",
 "scale": {
      "type": "threshold",
      "domain": [1000000, 10000000, 50000000, 100000000, 500000000],
        "range": [10, 50, 150, 200, 300, 400]
 },
 "legend": {"format": ".1s"}
 },
    "tooltip": [
      {"field": "Entity", "type": "nominal", "title": "Country"}, 
      {"field": "Year", "type": "temporal", "title": "Year", "timeUnit":"year"},
      {"field": "Energy Consumed","format": ".2f", "type": "quantitative", "title": "Energy Consumed"}
    ]
  },
  "config": {
      "background":"",
  "view": {
     "stroke": "transparent"
  }
}
}
